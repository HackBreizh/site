!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},h=function(a){function b(a,c){d(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.base=a,this.property=c}return e(b,a),f(b,[{key:"get",value:function(){return"Tget("+this.base+", "+this.property+")"}},{key:"set",value:function(a){return"Tset("+this.base+", "+this.property+", "+a+")"}},{key:"toString",value:function(){return this.get()}},{key:"valueOf",value:function(){return this.get()}}]),b}(String);c["default"]=h,b.exports=c["default"]},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=o++,c="let $"+b+" = $"+a+".extend(), $ = $"+b+";";return{scope:b,scopeDef:c}}function f(a,b){var c=h(a,b);return"Identifier"===a.type?"$get($, '"+c+"')":c}function g(a){return!!a.type.match(/CallExpression$/)}function h(a,b){var c=u[a.type];if(!c)throw console.info(a),new Error("No generator found for: "+a.type);return c.call(u,a,b)}function i(){var a="let __star = global.starlight.runtime, $0 = __star.globalScope, $ = $0, __star_tmp;\n";return a+="let __star_call = __star.call, __star_T = __star.T, __star_op_bool = __star.op.bool;",a+="let __star_op_unm = __star.op.unm, __star_op_not = __star.op.not, __star_op_len = __star.op.len, __star_op_concat = __star.op.concat, __star_op_add = __star.op.add, __star_op_sub = __star.op.sub, __star_op_mul = __star.op.mul, __star_op_div = __star.op.div, __star_op_mod = __star.op.mod, __star_op_eq = __star.op.eq, __star_op_neq = __star.op.neq, __star_op_lt = __star.op.lt, __star_op_gt = __star.op.gt, __star_op_lte = __star.op.lte, __star_op_gte = __star.op.gte, __star_op_pow = __star.op.pow;\n",a+="let Tget, Tset, Tins, $get, $set, $setLocal, __star_shift;",a+="()=>{",a+="let call = Function.prototype.call, bind = call.bind.bind(call), Tproto = __star_T.prototype, $proto = __star.globalScope.constructor.prototype;",a+="Tget = bind(Tproto.get), Tset = bind(Tproto.set), Tins = bind(Tproto.insert);",a+="$get = bind($proto.get), $set = bind($proto.set), $setLocal = bind($proto.setLocal);",a+="__star_shift = bind(Array.prototype.shift);",a+="}();"}function j(a){return h(a,0)}Object.defineProperty(c,"__esModule",{value:!0});var k=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[n.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(n.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();c.getRuntimeInit=i,c.generateJS=j;var l=a("./MemExpr"),m=d(l),n=n||{iterator:function(){}},o=1,p=0,q=0,r={"-":"unm",not:"not","#":"len"},s={"..":"concat","+":"add","-":"sub","*":"mul","/":"div","%":"mod","==":"eq","~=":"neq","<":"lt",">":"gt","<=":"lte",">=":"gte","^":"pow"},t={and:"&&",or:"||"},u={AssignmentStatement:function(a,b){var c=!0,d=a.variables.map(function(a,c){var d=void 0;if(d=f(a,b),d instanceof m["default"])return d.set("__star_tmp["+c+"]");var e=[].concat(d.match(/^\$get\((.*)\)$/)),g=k(e,2),h=g[0],i=g[1];if(!h)throw new Error("Unhandled");return"$set("+i+", __star_tmp["+c+"])"}).join(";\n"),e=a.init.map(function(a,d){var e=f(a,b);return g(a)?(c=!1,"..."+e):e});return c?d.replace(/__star_tmp\[(\d+)\]/g,function(a,b){return e[b]}):"__star_tmp = ["+e.join(", ")+"];"+d},BinaryExpression:function(a,b){var c=f(a.left,b),d=f(a.right,b),e=s[a.operator];if(g(a.left)&&(c+="[0]"),g(a.right)&&(d+="[0]"),!e)throw console.info(a),new Error("Unhandled binary operator: "+a.operator);return"__star_op_"+e+"("+c+", "+d+")"},BooleanLiteral:function(a){return a.value?"true":"false"},BreakStatement:function(a){return"break"},CallStatement:function(a,b){return h(a.expression,b)},CallExpression:function(a,b){var c=f(a.base,b),d=a.arguments.map(function(a){var c=f(a,b),d=g(a)?"...":"";return""+d+c});return g(a.base)?d.unshift(c+"[0]"):(c instanceof m["default"]&&":"===a.base.indexer&&d.unshift(c.base),d.unshift(""+c)),"__star_call("+d+")"},Chunk:function(a,b){var c=a.body.map(function(a){return h(a,b)+";"});return c.join("\n")},DoStatement:function(a,b){var c=e(b),d=c.scope,f=c.scopeDef,g=this.Chunk(a,d);return"()=>{\n"+f+"\n"+g+"\n}()"},ElseClause:function(a,b){var c=this.Chunk(a,b);return"{\n"+c+"\n}"},ElseifClause:function(a,b){return this.IfClause(a,b)},ForNumericStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,i=h(a.variable,b),j=f(a.start,b),k=f(a.end,b),l=null===a.step?1:h(a.step,b),m=k>j?"<=":">=",n=this.Chunk(a,d),o=++q,p="$"+b+"._forLoop"+o+" = "+j,r="$"+b+"._forLoop"+o+" "+m+" "+k,s="$"+b+"._forLoop"+o+" += "+l,t="$"+d+".setLocal('"+i+"',$"+b+"._forLoop"+o+");";return"for ("+p+"; "+r+"; "+s+") {\n"+g+"\n"+t+"\n"+n+"\n}"},ForGenericStatement:function(a,b){console.assert(1===a.iterators.length,"Only one iterator is assumed. Need to implement more!");var c=e(b),d=c.scope,g=c.scopeDef,i=f(a.iterators[0],b),j=this.Chunk(a,d),k=a.variables.map(function(a,b){var c=h(a,d);return"$setLocal($, '"+c+"', __star_tmp["+b+"])"}).join(";\n"),l=g.split(", ");return l[0]+";\n[$"+d+"._iterator, $"+d+"._table, $"+d+"._next] = "+i+";\nwhile((__star_tmp = __star_call($"+d+"._iterator, $"+d+"._table, $"+d+"._next)),__star_tmp[0] !== undefined) {\nlet "+l[1]+"$"+d+"._next = __star_tmp[0]\n"+k+"\n"+j+"\n}"},FunctionDeclaration:function(a,b){var c=e(b),d=c.scope,f=c.scopeDef,g=!a.identifier,i=g?"":h(a.identifier,b),j=i instanceof m["default"],k=a.parameters.map(function(a,b){var c=h(a,d);return"...$.getVarargs()"===c?"$.setVarargs(args)":"$setLocal($, '"+c+"', __star_shift(args))"}),l=void 0;j?(l=i.property.replace(/'/g,""),":"===a.identifier.indexer&&k.unshift("$set($, 'self', __star_shift(args))")):l=i;var n=k.join(";\n"),o=this.Chunk(a,d),q=g?"":"func$",r="(__star_tmp = function "+q+l+"(...args){"+f+"\n"+n+";\n"+o+" return [];}, __star_tmp.toString=()=>'function: 0x"+(++p).toString(16)+"', __star_tmp)";return g?r:j?i.set(r):"$set($, '"+i+"', "+r+")"},Identifier:function(a,b){return a.name},IfClause:function(a,b){var c=f(a.condition,b),d=this.Chunk(a,b);return"if (__star_op_bool("+c+")) {\n"+d+"\n}"},IfStatement:function(a,b){var c=a.clauses.map(function(a){return h(a,b)});return c.join(" else ")},IndexExpression:function(a,b){var c=f(a.base,b),d=f(a.index,b);return g(a.base)&&(c+="[0]"),g(a.index)&&(d+="[0]"),new m["default"](c,d)},LocalStatement:function(a,b){var c=!0,d=a.variables.map(function(a,c){var d=h(a,b);return"$setLocal($, '"+d+"', __star_tmp["+c+"])"}).join(";\n"),e=a.init.map(function(a,d){var e=f(a,b);return g(a)&&(c=!1,e="..."+e),e});return"__star_tmp = ["+e.join(", ")+"];"+d},LogicalExpression:function(a,b){var c=f(a.left,b),d=f(a.right,b),e=t[a.operator];if(!e)throw console.info(a),new Error("Unhandled logical operator: "+a.operator);return"("+c+" "+e+" "+d+")"},MemberExpression:function(a,b){var c=f(a.base,b),d=h(a.identifier,b);return g(a.base)&&(c+="[0]"),new m["default"](c,"'"+d+"'")},NilLiteral:function(a){return"undefined"},NumericLiteral:function(a){return a.value.toString()},RepeatStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,h=f(a.condition,b),i=this.Chunk(a,d);return"do{\n"+g+"\n"+i+"\n}while(!("+h+"))"},ReturnStatement:function(a,b){var c=a.arguments.map(function(a){var c=f(a,b);return g(a)?"..."+c:c}).join(", ");return"return ["+c+"];"},StringCallExpression:function(a,b){return a.arguments=a.argument,this.TableCallExpression(a,b)},StringLiteral:function(a){var b=a.value.replace(/["']/g,"\\$&").replace(/\n/g,"\\n");return"'"+b+"'"},TableCallExpression:function(a,b){var c=f(a.base,b),d=[h(a.arguments,b)];return g(a.base)?"__star_call("+c+"[0],"+d+")":(c instanceof m["default"]&&":"===a.base.indexer&&d.unshift(c.base),"__star_call("+c+","+d+")")},TableConstructorExpression:function(a,b){var c=a.fields.map(function(a){return h(a,b)}).join(";\n");return"new __star_T(t => {"+c+"})"},TableKeyString:function(a,b){var c=h(a.key,b),d=f(a.value,b);return"Tset(t, '"+c+"', "+d+")"},TableKey:function(a,b){var c=h(a.key,b),d=f(a.value,b);return"Tset(t, "+c+", "+d+")"},TableValue:function(a,b){var c=f(a.value,b),d=g(a.value)?"...":"";return"Tins(t, "+d+c+")"},UnaryExpression:function(a,b){var c=r[a.operator],d=f(a.argument,b);if(g(a.argument)&&(d+="[0]"),!c)throw console.info(a),new Error("Unhandled unary operator: "+a.operator);return"__star_op_"+c+"("+d+")"},VarargLiteral:function(a){return"...$.getVarargs()"},WhileStatement:function(a,b){var c=e(b),d=c.scope,g=c.scopeDef,h=f(a.condition,b),i=this.Chunk(a,d);return"while("+h+") {\n"+g+"\n"+i+"\n}"}}},{"./MemExpr":1}],3:[function(a,b,c){(function(b){"use strict";function c(a){return a&&a.__esModule?a:{"default":a}}function d(a){var c=g["default"].parse(a),d=e.getRuntimeInit()+e.generateJS(c),f=b.babel;return f?new Function("var global = global || window;"+f.transform(d).code):new Function("var global = global || window;"+d)}var e=a("./code-generator"),f=a("luaparse"),g=c(f);void 0===typeof b&&(b=window),b.starlight=b.starlight||{},b.starlight.parser={parse:d}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./code-generator":2,luaparse:4}],4:[function(a,b,c){(function(a){!function(d,e,f){"use strict";var g={"function":!0,object:!0},h=g[typeof c]&&c&&!c.nodeType&&c,i=g[typeof b]&&b&&!b.nodeType&&b,j=i&&i.exports===h&&h,k=g[typeof a]&&a;!k||k.global!==k&&k.window!==k||(d=k),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(define(["exports"],f),h&&j&&f(i.exports)):f(h&&i?j?i.exports:h:d[e]={})}(this,"luaparse",function(a){"use strict";function b(a){if(Wa){var b=Xa.pop();b.complete(),va.locations&&(a.loc=b.loc),va.ranges&&(a.range=b.range)}return va.onCreateNode&&va.onCreateNode(a),a}function c(a,b,c){for(var d=0,e=a.length;e>d;d++)if(a[d][b]===c)return d;return-1}function d(a){var b=Ra.call(arguments,1);return a=a.replace(/%(\d)/g,function(a,c){return""+b[c-1]||""})}function e(){for(var a,b,c=Ra.call(arguments),d={},e=0,f=c.length;f>e;e++){a=c[e];for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b])}return d}function f(a){var b,c,e=d.apply(null,Ra.call(arguments,1));throw"undefined"!=typeof a.line?(c=a.range[0]-a.lineStart,b=new SyntaxError(d("[%1:%2] %3",a.line,c,e)),b.line=a.line,b.index=a.range[0],b.column=c):(c=Ha-Oa+1,b=new SyntaxError(d("[%1:%2] %3",Na,c,e)),b.index=Ha,b.line=Na,b.column=c),b}function g(a,b){f(b,Pa.expectedToken,a,b.value)}function h(a,b){if("undefined"==typeof b&&(b=Ka.value),"undefined"!=typeof a.type){var c;switch(a.type){case za:c="string";break;case Aa:c="keyword";break;case Ba:c="identifier";break;case Ca:c="number";break;case Da:c="symbol";break;case Ea:c="boolean";break;case Fa:return f(a,Pa.unexpected,"symbol","nil",b)}return f(a,Pa.unexpected,c,a.value,b)}return f(a,Pa.unexpected,"symbol",a,b)}function i(){for(k();45===ua.charCodeAt(Ha)&&45===ua.charCodeAt(Ha+1);)u(),k();if(Ha>=wa)return{type:ya,value:"<eof>",line:Na,lineStart:Oa,range:[Ha,Ha]};var a=ua.charCodeAt(Ha),b=ua.charCodeAt(Ha+1);if(Ma=Ha,D(a))return l();switch(a){case 39:case 34:return o();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return q();case 46:return B(b)?q():46===b?46===ua.charCodeAt(Ha+2)?n():m(".."):m(".");case 61:return m(61===b?"==":"=");case 62:return m(61===b?">=":">");case 60:return m(61===b?"<=":"<");case 126:return 61===b?m("~="):f({},Pa.expected,"=","~");case 58:return m(58===b?"::":":");case 91:return 91===b||61===b?p():m("[");case 42:case 47:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return m(ua.charAt(Ha))}return h(ua.charAt(Ha))}function j(){var a=ua.charCodeAt(Ha),b=ua.charCodeAt(Ha+1);return A(a)?(10===a&&13===b&&Ha++,13===a&&10===b&&Ha++,Na++,Oa=++Ha,!0):!1}function k(){for(;wa>Ha;){var a=ua.charCodeAt(Ha);if(z(a))Ha++;else if(!j())break}}function l(){for(var a,b;E(ua.charCodeAt(++Ha)););return a=ua.slice(Ma,Ha),F(a)?b=Aa:"true"===a||"false"===a?(b=Ea,a="true"===a):"nil"===a?(b=Fa,a=null):b=Ba,{type:b,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function m(a){return Ha+=a.length,{type:Da,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function n(){return Ha+=3,{type:Ga,value:"...",line:Na,lineStart:Oa,range:[Ma,Ha]}}function o(){for(var a,b=ua.charCodeAt(Ha++),c=Ha,d="";wa>Ha&&(a=ua.charCodeAt(Ha++),b!==a);)92===a?(d+=ua.slice(c,Ha-1)+t(),c=Ha):(Ha>=wa||A(a))&&(d+=ua.slice(c,Ha-1),f({},Pa.unfinishedString,d+String.fromCharCode(a)));return d+=ua.slice(c,Ha-1),{type:za,value:d,line:Na,lineStart:Oa,range:[Ma,Ha]}}function p(){var a=v();return!1===a&&f(Ia,Pa.expected,"[",Ia.value),{type:za,value:a,line:Na,lineStart:Oa,range:[Ma,Ha]}}function q(){var a=ua.charAt(Ha),b=ua.charAt(Ha+1),c="0"===a&&"xX".indexOf(b||null)>=0?r():s();return{type:Ca,value:c,line:Na,lineStart:Oa,range:[Ma,Ha]}}function r(){var a,b,c,d,e=0,g=1,h=1;for(d=Ha+=2,C(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));C(ua.charCodeAt(Ha));)Ha++;if(a=parseInt(ua.slice(d,Ha),16),"."===ua.charAt(Ha)){for(b=++Ha;C(ua.charCodeAt(Ha));)Ha++;e=ua.slice(b,Ha),e=b===Ha?0:parseInt(e,16)/Math.pow(16,Ha-b)}if("pP".indexOf(ua.charAt(Ha)||null)>=0){for(Ha++,"+-".indexOf(ua.charAt(Ha)||null)>=0&&(h="+"===ua.charAt(Ha++)?1:-1),c=Ha,B(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));B(ua.charCodeAt(Ha));)Ha++;g=ua.slice(c,Ha),g=Math.pow(2,g*h)}return(a+e)*g}function s(){for(;B(ua.charCodeAt(Ha));)Ha++;if("."===ua.charAt(Ha))for(Ha++;B(ua.charCodeAt(Ha));)Ha++;if("eE".indexOf(ua.charAt(Ha)||null)>=0)for(Ha++,"+-".indexOf(ua.charAt(Ha)||null)>=0&&Ha++,B(ua.charCodeAt(Ha))||f({},Pa.malformedNumber,ua.slice(Ma,Ha));B(ua.charCodeAt(Ha));)Ha++;return parseFloat(ua.slice(Ma,Ha))}function t(){var a=Ha;switch(ua.charAt(Ha)){case"n":return Ha++,"\n";case"r":return Ha++,"\r";case"t":return Ha++,"	";case"v":return Ha++,"";case"b":return Ha++,"\b";case"f":return Ha++,"\f";case"z":return Ha++,k(),"";case"x":return C(ua.charCodeAt(Ha+1))&&C(ua.charCodeAt(Ha+2))?(Ha+=3,"\\"+ua.slice(a,Ha)):"\\"+ua.charAt(Ha++);default:if(B(ua.charCodeAt(Ha))){for(;B(ua.charCodeAt(++Ha)););return"\\"+ua.slice(a,Ha)}return ua.charAt(Ha++)}}function u(){Ma=Ha,Ha+=2;var a=ua.charAt(Ha),b="",c=!1,d=Ha,e=Oa,f=Na;if("["===a&&(b=v(),!1===b?b=a:c=!0),!c){for(;wa>Ha&&!A(ua.charCodeAt(Ha));)Ha++;va.comments&&(b=ua.slice(d,Ha))}if(va.comments){var g=Qa.comment(b,ua.slice(Ma,Ha));va.locations&&(g.loc={start:{line:f,column:Ma-e},end:{line:Na,column:Ha-Oa}}),va.ranges&&(g.range=[Ma,Ha]),va.onCreateNode&&va.onCreateNode(g),La.push(g)}}function v(){var a,b,c=0,d="",e=!1;for(Ha++;"="===ua.charAt(Ha+c);)c++;if("["!==ua.charAt(Ha+c))return!1;for(Ha+=c+1,A(ua.charCodeAt(Ha))&&j(),b=Ha;wa>Ha;){if(A(ua.charCodeAt(Ha))&&j(),a=ua.charAt(Ha++),"]"===a){e=!0;for(var f=0;c>f;f++)"="!==ua.charAt(Ha+f)&&(e=!1);"]"!==ua.charAt(Ha+c)&&(e=!1)}if(e)break}return d+=ua.slice(b,Ha-1),Ha+=c+1,d}function w(){Ja=Ia,Ia=Ka,Ka=i()}function x(a){return a===Ia.value?(w(),!0):!1}function y(a){a===Ia.value?w():f(Ia,Pa.expected,a,Ia.value)}function z(a){return 9===a||32===a||11===a||12===a}function A(a){return 10===a||13===a}function B(a){return a>=48&&57>=a}function C(a){return a>=48&&57>=a||a>=97&&102>=a||a>=65&&70>=a}function D(a){return a>=65&&90>=a||a>=97&&122>=a||95===a}function E(a){return a>=65&&90>=a||a>=97&&122>=a||95===a||a>=48&&57>=a}function F(a){switch(a.length){case 2:return"do"===a||"if"===a||"in"===a||"or"===a;case 3:return"and"===a||"end"===a||"for"===a||"not"===a;case 4:return"else"===a||"goto"===a||"then"===a;case 5:return"break"===a||"local"===a||"until"===a||"while"===a;case 6:return"elseif"===a||"repeat"===a||"return"===a;case 8:return"function"===a}return!1}function G(a){return Da===a.type?"#-".indexOf(a.value)>=0:Aa===a.type?"not"===a.value:!1}function H(a){switch(a.type){case"CallExpression":case"TableCallExpression":case"StringCallExpression":return!0}return!1}function I(a){if(ya===a.type)return!0;if(Aa!==a.type)return!1;switch(a.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}function J(){var a=Array.apply(null,Ta[Ua++]);Ta.push(a),va.onCreateScope&&va.onCreateScope()}function K(){Ta.pop();Ua--,va.onDestroyScope&&va.onDestroyScope()}function L(a){-1===Sa(Ta[Ua],a)&&Ta[Ua].push(a)}function M(a){L(a.name),N(a,!0)}function N(a,b){b||-1!==c(Va,"name",a.name)||Va.push(a),a.isLocal=b}function O(a){return-1!==Sa(Ta[Ua],a)}function P(){return new Q(Ia)}function Q(a){va.locations&&(this.loc={start:{line:a.line,column:a.range[0]-a.lineStart},end:{line:0,column:0}}),va.ranges&&(this.range=[a.range[0],0])}function R(){Wa&&Xa.push(P())}function S(a){Wa&&Xa.push(a)}function T(){w(),R(),va.scope&&J();var a=U();return va.scope&&K(),ya!==Ia.type&&h(Ia),Wa&&!a.length&&(Ja=Ia),b(Qa.chunk(a))}function U(a){for(var b,c=[];!I(Ia);){if("return"===Ia.value){c.push(V());break}b=V(),b&&c.push(b)}return c}function V(){if(R(),Aa===Ia.type)switch(Ia.value){case"local":return w(),da();case"if":return w(),ba();case"return":return w(),aa();case"function":w();var a=ia();return ha(a);case"while":return w(),$();case"for":return w(),ca();case"repeat":return w(),_();case"break":return w(),X();case"do":return w(),Z();case"goto":return w(),Y()}return Da===Ia.type&&x("::")?W():(Wa&&Xa.pop(),x(";")?void 0:fa())}function W(){var a=Ia.value,c=ga();return va.scope&&(L("::"+a+"::"),N(c,!0)),y("::"),b(Qa.labelStatement(c))}function X(){return b(Qa.breakStatement())}function Y(){var a=(Ia.value,ga());return b(Qa.gotoStatement(a))}function Z(){va.scope&&J();var a=U();return va.scope&&K(),y("end"),b(Qa.doStatement(a))}function $(){var a=la();y("do"),va.scope&&J();var c=U();return va.scope&&K(),y("end"),b(Qa.whileStatement(a,c))}function _(){va.scope&&J();var a=U();y("until");var c=la();return va.scope&&K(),b(Qa.repeatStatement(c,a))}function aa(){var a=[];if("end"!==Ia.value){var c=ka();for(null!=c&&a.push(c);x(",");)c=la(),a.push(c);x(";")}return b(Qa.returnStatement(a))}function ba(){var a,c,d,e=[];for(Wa&&(d=Xa[Xa.length-1],Xa.push(d)),a=la(),y("then"),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.ifClause(a,c))),Wa&&(d=P());x("elseif");)S(d),a=la(),y("then"),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.elseifClause(a,c))),Wa&&(d=P());return x("else")&&(Wa&&(d=new Q(Ja),Xa.push(d)),va.scope&&J(),c=U(),va.scope&&K(),e.push(b(Qa.elseClause(c)))),y("end"),b(Qa.ifStatement(e))}function ca(){var a,c=ga();if(va.scope&&(J(),M(c)),x("=")){var d=la();y(",");var e=la(),f=x(",")?la():null;return y("do"),a=U(),y("end"),va.scope&&K(),b(Qa.forNumericStatement(c,d,e,f,a))}for(var g=[c];x(",");)c=ga(),va.scope&&M(c),g.push(c);y("in");var h=[];do{var i=la();h.push(i)}while(x(","));return y("do"),a=U(),y("end"),va.scope&&K(),b(Qa.forGenericStatement(g,h,a))}function da(){var a;if(Ba===Ia.type){var c=[],d=[];do a=ga(),c.push(a);while(x(","));if(x("="))do{var e=la();d.push(e)}while(x(","));if(va.scope)for(var f=0,h=c.length;h>f;f++)M(c[f]);return b(Qa.localStatement(c,d))}return x("function")?(a=ga(),va.scope&&(M(a),J()),ha(a,!0)):void g("<name>",Ia)}function ea(a){(a.inParens||-1===["Identifier","MemberExpression","IndexExpression"].indexOf(a.type))&&f(Ia,Pa.invalidVar,Ia.value)}function fa(){var a,c,d=Ia;if(Wa&&(c=P()),a=oa(),null==a)return h(Ia);if(",=".indexOf(Ia.value)>=0){var e,f=[a],i=[];for(ea(a);x(",");)e=oa(),null==e&&g("<expression>",Ia),ea(e),f.push(e);y("=");do e=la(),i.push(e);while(x(","));return S(c),b(Qa.assignmentStatement(f,i))}return H(a)?(S(c),b(Qa.callStatement(a))):h(d)}function ga(){R();var a=Ia.value;return Ba!==Ia.type&&g("<name>",Ia),w(),b(Qa.identifier(a))}function ha(a,c){var d=[];if(y("("),!x(")"))for(;;)if(Ba===Ia.type){var e=ga();if(va.scope&&M(e),d.push(e),x(","))continue;if(x(")"))break}else{if(Ga===Ia.type){d.push(qa()),y(")");break}g("<name> or '...'",Ia)}var f=U();return y("end"),va.scope&&K(),c=c||!1,b(Qa.functionStatement(a,d,c,f))}function ia(){var a,c,d;for(Wa&&(d=P()),a=ga(),va.scope&&(N(a,O(a.name)),J());x(".");)S(d),c=ga(),a=b(Qa.memberExpression(a,".",c));return x(":")&&(S(d),c=ga(),a=b(Qa.memberExpression(a,":",c)),va.scope&&L("self")),a}function ja(){for(var a,c,d=[];;){if(R(),Da===Ia.type&&x("["))a=la(),y("]"),y("="),c=la(),d.push(b(Qa.tableKey(a,c)));else if(Ba===Ia.type)"="===Ka.value?(a=ga(),w(),c=la(),d.push(b(Qa.tableKeyString(a,c)))):(c=la(),d.push(b(Qa.tableValue(c))));else{if(null==(c=ka())){Xa.pop();break}d.push(b(Qa.tableValue(c)))}if(!(",;".indexOf(Ia.value)>=0))break;w()}return y("}"),b(Qa.tableConstructorExpression(d))}function ka(){var a=na(0);return a}function la(){var a=ka();return null!=a?a:void g("<expression>",Ia)}function ma(a){var b=a.charCodeAt(0),c=a.length;if(1===c)switch(b){case 94:return 10;case 42:case 47:case 37:return 7;case 43:case 45:return 6;case 60:case 62:return 3}else if(2===c)switch(b){case 46:return 5;case 60:case 62:case 61:case 126:return 3;case 111:return 1}else if(97===b&&"and"===a)return 2;return 0}function na(a){var c,d,e=Ia.value;if(Wa&&(d=P()),G(Ia)){R(),w();var f=na(8);null==f&&g("<expression>",Ia),c=b(Qa.unaryExpression(e,f))}if(null==c&&(c=qa(),null==c&&(c=oa())),null==c)return null;for(var h;;){if(e=Ia.value,h=Da===Ia.type||Aa===Ia.type?ma(e):0,0===h||a>=h)break;("^"===e||".."===e)&&h--,w();var i=na(h);null==i&&g("<expression>",Ia),Wa&&Xa.push(d),c=b(Qa.binaryExpression(e,c,i))}return c}function oa(){var a,c,d;if(Wa&&(d=P()),Ba===Ia.type)c=Ia.value,a=ga(),va.scope&&N(a,O(c));else{if(!x("("))return null;a=la(),y(")"),a.inParens=!0}for(var e,f;;)if(Da===Ia.type)switch(Ia.value){case"[":S(d),w(),e=la(),a=b(Qa.indexExpression(a,e)),y("]");break;case".":S(d),w(),f=ga(),a=b(Qa.memberExpression(a,".",f));break;case":":S(d),w(),f=ga(),a=b(Qa.memberExpression(a,":",f)),S(d),a=pa(a);break;case"(":case"{":S(d),a=pa(a);break;default:return a}else{if(za!==Ia.type)break;S(d),a=pa(a)}return a}function pa(a){if(Da===Ia.type)switch(Ia.value){case"(":w();var c=[],d=ka();for(null!=d&&c.push(d);x(",");)d=la(),c.push(d);return y(")"),b(Qa.callExpression(a,c));case"{":R(),w();var e=ja();return b(Qa.tableCallExpression(a,e))}else if(za===Ia.type)return b(Qa.stringCallExpression(a,qa()));g("function arguments",Ia)}function qa(){var a,c=za|Ca|Ea|Fa|Ga,d=Ia.value,e=Ia.type;if(Wa&&(a=P()),e&c){S(a);var f=ua.slice(Ia.range[0],Ia.range[1]);return w(),b(Qa.literal(e,d,f))}return Aa===e&&"function"===d?(S(a),w(),va.scope&&J(),ha(null)):x("{")?(S(a),ja()):void 0}function ra(b,c){return"undefined"==typeof c&&"object"==typeof b&&(c=b,b=void 0),c||(c={}),ua=b||"",va=e(xa,c),Ha=0,Na=1,Oa=0,wa=ua.length,Ta=[[]],Ua=0,Va=[],Xa=[],va.comments&&(La=[]),va.wait?a:ta()}function sa(b){return ua+=String(b),wa=ua.length,a}function ta(a){"undefined"!=typeof a&&sa(a),wa=ua.length,Wa=va.locations||va.ranges,Ka=i();var b=T();if(va.comments&&(b.comments=La),va.scope&&(b.globals=Va),Xa.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return b}a.version="0.1.15";var ua,va,wa,xa=a.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null},ya=1,za=2,Aa=4,Ba=8,Ca=16,Da=32,Ea=64,Fa=128,Ga=256;a.tokenTypes={EOF:ya,StringLiteral:za,Keyword:Aa,Identifier:Ba,NumericLiteral:Ca,Punctuator:Da,BooleanLiteral:Ea,NilLiteral:Fa,VarargLiteral:Ga};var Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa=a.errors={unexpected:"unexpected %1 '%2' near '%3'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",invalidVar:"invalid left-hand side of assignment near '%1'"},Qa=a.ast={labelStatement:function(a){return{type:"LabelStatement",label:a}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(a){return{type:"GotoStatement",label:a}},returnStatement:function(a){return{type:"ReturnStatement",arguments:a}},ifStatement:function(a){return{type:"IfStatement",clauses:a}},ifClause:function(a,b){return{type:"IfClause",condition:a,body:b}},elseifClause:function(a,b){return{type:"ElseifClause",condition:a,body:b}},elseClause:function(a){return{type:"ElseClause",body:a}},whileStatement:function(a,b){return{type:"WhileStatement",condition:a,body:b}},doStatement:function(a){return{type:"DoStatement",body:a}},repeatStatement:function(a,b){return{type:"RepeatStatement",condition:a,body:b}},localStatement:function(a,b){return{type:"LocalStatement",variables:a,init:b}},assignmentStatement:function(a,b){return{type:"AssignmentStatement",variables:a,init:b}},callStatement:function(a){return{type:"CallStatement",expression:a}},functionStatement:function(a,b,c,d){return{type:"FunctionDeclaration",identifier:a,isLocal:c,parameters:b,body:d}},forNumericStatement:function(a,b,c,d,e){return{type:"ForNumericStatement",variable:a,start:b,end:c,step:d,body:e}},forGenericStatement:function(a,b,c){return{type:"ForGenericStatement",variables:a,iterators:b,body:c}},chunk:function(a){return{type:"Chunk",body:a}},identifier:function(a){return{type:"Identifier",name:a}},literal:function(a,b,c){return a=a===za?"StringLiteral":a===Ca?"NumericLiteral":a===Ea?"BooleanLiteral":a===Fa?"NilLiteral":"VarargLiteral",{type:a,value:b,raw:c}},tableKey:function(a,b){return{type:"TableKey",key:a,value:b}},tableKeyString:function(a,b){return{type:"TableKeyString",key:a,value:b}},tableValue:function(a){return{type:"TableValue",value:a}},tableConstructorExpression:function(a){return{type:"TableConstructorExpression",fields:a}},binaryExpression:function(a,b,c){var d="and"===a||"or"===a?"LogicalExpression":"BinaryExpression";return{type:d,operator:a,left:b,right:c}},unaryExpression:function(a,b){return{type:"UnaryExpression",operator:a,argument:b}},memberExpression:function(a,b,c){return{type:"MemberExpression",indexer:b,identifier:c,base:a}},indexExpression:function(a,b){return{type:"IndexExpression",base:a,index:b}},callExpression:function(a,b){return{type:"CallExpression",base:a,arguments:b}},tableCallExpression:function(a,b){return{type:"TableCallExpression",base:a,arguments:b}},stringCallExpression:function(a,b){return{type:"StringCallExpression",base:a,argument:b}},comment:function(a,b){return{type:"Comment",value:a,raw:b}}},Ra=Array.prototype.slice,Sa=(Object.prototype.toString,function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1});a.lex=i;var Ta,Ua,Va,Wa,Xa=[];Q.prototype.complete=function(){va.locations&&(this.loc.end.line=Ja.line,this.loc.end.column=Ja.range[1]-Ja.lineStart),va.ranges&&(this.range[1]=Ja.range[1])},a.parse=ra,a.write=sa,a.end=ta})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3]);